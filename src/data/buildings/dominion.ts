import { BuildingDefinition } from '@/engine/components/Building';

export const BUILDING_DEFINITIONS: Record<string, BuildingDefinition> = {
  command_center: {
    id: 'command_center',
    name: 'Command Center',
    faction: 'dominion',
    mineralCost: 400,
    vespeneCost: 0,
    buildTime: 71,
    width: 5,
    height: 5,
    maxHealth: 1500,
    armor: 1,
    sightRange: 11,
    supplyProvided: 11,
    canProduce: ['scv'],
    canResearch: [],
    canLiftOff: true,
    canUpgradeTo: ['orbital_command', 'planetary_fortress'],
  },

  // Orbital Command - upgraded from Command Center
  orbital_command: {
    id: 'orbital_command',
    name: 'Orbital Command',
    faction: 'dominion',
    mineralCost: 150, // Upgrade cost from CC
    vespeneCost: 0,
    buildTime: 25,
    width: 5,
    height: 5,
    maxHealth: 1500,
    armor: 1,
    sightRange: 11,
    supplyProvided: 11,
    canProduce: ['scv'],
    canResearch: ['scanner_sweep', 'mule', 'supply_drop'],
    canLiftOff: true,
  },

  // Planetary Fortress - upgraded from Command Center
  planetary_fortress: {
    id: 'planetary_fortress',
    name: 'Planetary Fortress',
    faction: 'dominion',
    mineralCost: 150,
    vespeneCost: 150,
    buildTime: 36,
    width: 5,
    height: 5,
    maxHealth: 1500,
    armor: 3,
    sightRange: 11,
    supplyProvided: 11,
    canProduce: ['scv'],
    canResearch: [],
    canLiftOff: false, // Can't lift off once upgraded
    attackRange: 6,
    attackDamage: 40,
    attackSpeed: 0.71,
  },

  supply_depot: {
    id: 'supply_depot',
    name: 'Supply Depot',
    faction: 'dominion',
    mineralCost: 100,
    vespeneCost: 0,
    buildTime: 21,
    width: 2,
    height: 2,
    maxHealth: 400,
    armor: 1,
    sightRange: 9,
    supplyProvided: 8,
    canProduce: [],
    canResearch: [],
    canLower: true, // Can lower to let units pass
  },

  refinery: {
    id: 'refinery',
    name: 'Refinery',
    faction: 'dominion',
    mineralCost: 75,
    vespeneCost: 0,
    buildTime: 21,
    width: 2,
    height: 2,
    maxHealth: 500,
    armor: 1,
    sightRange: 9,
    canProduce: [],
    canResearch: [],
  },

  barracks: {
    id: 'barracks',
    name: 'Barracks',
    faction: 'dominion',
    mineralCost: 150,
    vespeneCost: 0,
    buildTime: 46,
    width: 3,
    height: 3,
    maxHealth: 1000,
    armor: 1,
    sightRange: 9,
    canProduce: ['marine', 'reaper'], // Basic units without tech lab
    canResearch: [],
    requirements: ['supply_depot'],
    canLiftOff: true,
    canHaveAddon: true,
  },

  engineering_bay: {
    id: 'engineering_bay',
    name: 'Engineering Bay',
    faction: 'dominion',
    mineralCost: 125,
    vespeneCost: 0,
    buildTime: 25,
    width: 3,
    height: 3,
    maxHealth: 850,
    armor: 1,
    sightRange: 9,
    canProduce: [],
    canResearch: ['infantry_weapons_1', 'infantry_armor_1', 'infantry_weapons_2', 'infantry_armor_2', 'infantry_weapons_3', 'infantry_armor_3'],
    requirements: ['supply_depot'],
  },

  bunker: {
    id: 'bunker',
    name: 'Bunker',
    faction: 'dominion',
    mineralCost: 100,
    vespeneCost: 0,
    buildTime: 29,
    width: 3,
    height: 3,
    maxHealth: 400,
    armor: 1,
    sightRange: 11,
    canProduce: [],
    canResearch: [],
    requirements: ['barracks'],
    isBunker: true,
    bunkerCapacity: 4,
  },

  factory: {
    id: 'factory',
    name: 'Factory',
    faction: 'dominion',
    mineralCost: 150,
    vespeneCost: 100,
    buildTime: 43,
    width: 3,
    height: 3,
    maxHealth: 1250,
    armor: 1,
    sightRange: 9,
    canProduce: ['hellion'], // Basic units without tech lab
    canResearch: [],
    requirements: ['barracks'],
    canLiftOff: true,
    canHaveAddon: true,
  },

  armory: {
    id: 'armory',
    name: 'Armory',
    faction: 'dominion',
    mineralCost: 150,
    vespeneCost: 100,
    buildTime: 46,
    width: 3,
    height: 3,
    maxHealth: 750,
    armor: 1,
    sightRange: 9,
    canProduce: [],
    canResearch: ['vehicle_weapons_1', 'vehicle_armor_1', 'ship_weapons_1', 'ship_armor_1', 'vehicle_weapons_2', 'vehicle_armor_2', 'ship_weapons_2', 'ship_armor_2', 'vehicle_weapons_3', 'vehicle_armor_3', 'ship_weapons_3', 'ship_armor_3'],
    requirements: ['factory'],
  },

  starport: {
    id: 'starport',
    name: 'Starport',
    faction: 'dominion',
    mineralCost: 150,
    vespeneCost: 100,
    buildTime: 36,
    width: 3,
    height: 3,
    maxHealth: 1300,
    armor: 1,
    sightRange: 9,
    canProduce: ['medivac', 'viking'], // Basic units without tech lab
    canResearch: [],
    requirements: ['factory'],
    canLiftOff: true,
    canHaveAddon: true,
  },

  fusion_core: {
    id: 'fusion_core',
    name: 'Fusion Core',
    faction: 'dominion',
    mineralCost: 150,
    vespeneCost: 150,
    buildTime: 46,
    width: 3,
    height: 3,
    maxHealth: 750,
    armor: 1,
    sightRange: 9,
    canProduce: [],
    canResearch: ['yamato_cannon', 'battlecruiser_weapon_refit'],
    requirements: ['starport'],
  },

  ghost_academy: {
    id: 'ghost_academy',
    name: 'Ghost Academy',
    faction: 'dominion',
    mineralCost: 150,
    vespeneCost: 50,
    buildTime: 29,
    width: 3,
    height: 3,
    maxHealth: 1250,
    armor: 1,
    sightRange: 9,
    canProduce: [],
    canResearch: ['personal_cloaking', 'moebius_reactor'],
    requirements: ['barracks'],
  },

  sensor_tower: {
    id: 'sensor_tower',
    name: 'Sensor Tower',
    faction: 'dominion',
    mineralCost: 125,
    vespeneCost: 100,
    buildTime: 18,
    width: 2,
    height: 2,
    maxHealth: 200,
    armor: 0,
    sightRange: 30,
    canProduce: [],
    canResearch: [],
    requirements: ['engineering_bay'],
    isDetector: true,
    detectionRange: 30,
  },

  missile_turret: {
    id: 'missile_turret',
    name: 'Missile Turret',
    faction: 'dominion',
    mineralCost: 100,
    vespeneCost: 0,
    buildTime: 18,
    width: 2,
    height: 2,
    maxHealth: 250,
    armor: 0,
    sightRange: 11,
    canProduce: [],
    canResearch: [],
    requirements: ['engineering_bay'],
    isDetector: true,
    detectionRange: 11,
    attackRange: 7,
    attackDamage: 12,
    attackSpeed: 0.61,
  },

  // Tech Lab addon
  tech_lab: {
    id: 'tech_lab',
    name: 'Tech Lab',
    faction: 'dominion',
    mineralCost: 50,
    vespeneCost: 25,
    buildTime: 18,
    width: 2,
    height: 2,
    maxHealth: 400,
    armor: 1,
    sightRange: 9,
    canProduce: [],
    canResearch: ['stim_pack', 'combat_shield', 'concussive_shells', 'infernal_pre_igniter', 'siege_tech', 'drilling_claws', 'cloaking_field', 'caduceus_reactor'],
    isAddon: true,
    addonFor: ['barracks', 'factory', 'starport'],
  },

  // Reactor addon
  reactor: {
    id: 'reactor',
    name: 'Reactor',
    faction: 'dominion',
    mineralCost: 50,
    vespeneCost: 50,
    buildTime: 36,
    width: 2,
    height: 2,
    maxHealth: 400,
    armor: 1,
    sightRange: 9,
    canProduce: [],
    canResearch: [],
    isAddon: true,
    addonFor: ['barracks', 'factory', 'starport'],
  },
};

// Units that require Tech Lab
export const TECH_LAB_UNITS: Record<string, string[]> = {
  barracks: ['marauder', 'ghost'],
  factory: ['siege_tank', 'thor'],
  starport: ['raven', 'banshee', 'battlecruiser'],
};

// Units that can be double-produced with Reactor
export const REACTOR_UNITS: Record<string, string[]> = {
  barracks: ['marine', 'reaper'],
  factory: ['hellion'],
  starport: ['medivac', 'viking'],
};

export const DOMINION_BUILDINGS = Object.values(BUILDING_DEFINITIONS);
