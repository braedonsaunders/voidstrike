import { UnitDefinition, TransformMode } from '@/engine/components/Unit';

// Transform modes for Siege Tank
const SIEGE_TANK_MODES: TransformMode[] = [
  {
    id: 'tank',
    name: 'Tank Mode',
    speed: 3.15,
    attackRange: 7,
    attackDamage: 15,
    attackSpeed: 0.74,
    splashRadius: 0.5,
    sightRange: 11,
    canMove: true,
    transformTime: 2,
  },
  {
    id: 'siege',
    name: 'Siege Mode',
    speed: 0,
    attackRange: 13,
    attackDamage: 40,
    attackSpeed: 0.47,
    splashRadius: 1.25,
    sightRange: 11,
    canMove: false,
    transformTime: 2,
  },
];

// Transform modes for Hellion/Hellbat
const HELLION_MODES: TransformMode[] = [
  {
    id: 'hellion',
    name: 'Hellion',
    speed: 5.95,
    attackRange: 5,
    attackDamage: 8,
    attackSpeed: 1.8,
    splashRadius: 2,
    sightRange: 10,
    canMove: true,
    transformTime: 2,
  },
  {
    id: 'hellbat',
    name: 'Hellbat',
    speed: 3.15,
    attackRange: 2,
    attackDamage: 18,
    attackSpeed: 1.4,
    splashRadius: 1.5,
    sightRange: 10,
    canMove: true,
    transformTime: 2,
  },
];

// Transform modes for Viking
const VIKING_MODES: TransformMode[] = [
  {
    id: 'fighter',
    name: 'Fighter Mode',
    speed: 3.85,
    attackRange: 9,
    attackDamage: 10,
    attackSpeed: 0.71,
    sightRange: 10,
    isFlying: true,
    canMove: true,
    transformTime: 2.25,
  },
  {
    id: 'assault',
    name: 'Assault Mode',
    speed: 3.15,
    attackRange: 6,
    attackDamage: 12,
    attackSpeed: 0.71,
    sightRange: 10,
    isFlying: false,
    canMove: true,
    transformTime: 2.25,
  },
];

export const UNIT_DEFINITIONS: Record<string, UnitDefinition> = {
  scv: {
    id: 'scv',
    name: 'SCV',
    faction: 'dominion',
    mineralCost: 50,
    vespeneCost: 0,
    buildTime: 12,
    supplyCost: 1,
    speed: 4,
    sightRange: 8,
    attackRange: 1,
    attackDamage: 5,
    attackSpeed: 0.7,
    damageType: 'normal',
    maxHealth: 45,
    armor: 0,
    isWorker: true,
    isMechanical: true,
    canRepair: true,
  },

  marine: {
    id: 'marine',
    name: 'Marine',
    faction: 'dominion',
    mineralCost: 50,
    vespeneCost: 0,
    buildTime: 18,
    supplyCost: 1,
    speed: 4.5,
    sightRange: 9,
    attackRange: 5,
    attackDamage: 6,
    attackSpeed: 0.86,
    damageType: 'normal',
    maxHealth: 45,
    armor: 0,
    abilities: ['stim_pack'],
    isBiological: true,
  },

  marauder: {
    id: 'marauder',
    name: 'Marauder',
    faction: 'dominion',
    mineralCost: 100,
    vespeneCost: 25,
    buildTime: 21,
    supplyCost: 2,
    speed: 3.5,
    sightRange: 10,
    attackRange: 6,
    attackDamage: 10,
    attackSpeed: 0.7,
    damageType: 'concussive',
    maxHealth: 125,
    armor: 1,
    abilities: ['stim_pack', 'concussive_shells'],
    isBiological: true,
  },

  reaper: {
    id: 'reaper',
    name: 'Reaper',
    faction: 'dominion',
    mineralCost: 50,
    vespeneCost: 50,
    buildTime: 32,
    supplyCost: 1,
    speed: 5.25,
    sightRange: 9,
    attackRange: 5,
    attackDamage: 4,
    attackSpeed: 1.1,
    damageType: 'normal',
    maxHealth: 60,
    armor: 0,
    abilities: ['jet_pack', 'grenade'],
    isBiological: true,
  },

  ghost: {
    id: 'ghost',
    name: 'Ghost',
    faction: 'dominion',
    mineralCost: 150,
    vespeneCost: 125,
    buildTime: 29,
    supplyCost: 2,
    speed: 3.94,
    sightRange: 11,
    attackRange: 6,
    attackDamage: 10,
    attackSpeed: 0.86,
    damageType: 'normal',
    maxHealth: 100,
    armor: 0,
    abilities: ['snipe', 'emp_round', 'cloak', 'nuke'],
    isBiological: true,
    canCloak: true,
    cloakEnergyCost: 1,
  },

  hellion: {
    id: 'hellion',
    name: 'Hellion',
    faction: 'dominion',
    mineralCost: 100,
    vespeneCost: 0,
    buildTime: 21,
    supplyCost: 2,
    speed: 5.95,
    sightRange: 10,
    attackRange: 5,
    attackDamage: 8,
    attackSpeed: 1.8,
    damageType: 'explosive',
    maxHealth: 90,
    armor: 0,
    abilities: ['transform_hellbat'],
    splashRadius: 2,
    isMechanical: true,
    canTransform: true,
    transformModes: HELLION_MODES,
    defaultMode: 'hellion',
  },

  siege_tank: {
    id: 'siege_tank',
    name: 'Siege Tank',
    faction: 'dominion',
    mineralCost: 150,
    vespeneCost: 125,
    buildTime: 32,
    supplyCost: 3,
    speed: 3.15,
    sightRange: 11,
    attackRange: 7,
    attackDamage: 15,
    attackSpeed: 0.74,
    damageType: 'explosive',
    maxHealth: 175,
    armor: 1,
    abilities: ['siege_mode'],
    splashRadius: 0.5,
    isMechanical: true,
    canTransform: true,
    transformModes: SIEGE_TANK_MODES,
    defaultMode: 'tank',
  },

  thor: {
    id: 'thor',
    name: 'Thor',
    faction: 'dominion',
    mineralCost: 300,
    vespeneCost: 200,
    buildTime: 43,
    supplyCost: 6,
    speed: 2.62,
    sightRange: 11,
    attackRange: 7,
    attackDamage: 30,
    attackSpeed: 0.9,
    damageType: 'explosive',
    maxHealth: 400,
    armor: 2,
    abilities: ['high_impact_payload'],
    isMechanical: true,
  },

  medivac: {
    id: 'medivac',
    name: 'Medivac',
    faction: 'dominion',
    mineralCost: 100,
    vespeneCost: 100,
    buildTime: 30,
    supplyCost: 2,
    speed: 4.13,
    sightRange: 11,
    attackRange: 0,
    attackDamage: 0,
    attackSpeed: 0,
    damageType: 'normal',
    maxHealth: 150,
    armor: 1,
    abilities: ['heal', 'load', 'unload', 'afterburners'],
    isFlying: true,
    isMechanical: true,
    isTransport: true,
    transportCapacity: 8,
    canHeal: true,
    healRange: 4,
    healRate: 12.6,
    healEnergyCost: 1,
  },

  viking: {
    id: 'viking',
    name: 'Viking',
    faction: 'dominion',
    mineralCost: 150,
    vespeneCost: 75,
    buildTime: 30,
    supplyCost: 2,
    speed: 3.85,
    sightRange: 10,
    attackRange: 9,
    attackDamage: 10,
    attackSpeed: 0.71,
    damageType: 'explosive',
    maxHealth: 135,
    armor: 0,
    abilities: ['transform_assault'],
    isFlying: true,
    isMechanical: true,
    canTransform: true,
    transformModes: VIKING_MODES,
    defaultMode: 'fighter',
  },

  banshee: {
    id: 'banshee',
    name: 'Banshee',
    faction: 'dominion',
    mineralCost: 150,
    vespeneCost: 100,
    buildTime: 43,
    supplyCost: 3,
    speed: 3.85,
    sightRange: 10,
    attackRange: 6,
    attackDamage: 12,
    attackSpeed: 0.89,
    damageType: 'normal',
    maxHealth: 140,
    armor: 0,
    abilities: ['cloak'],
    isFlying: true,
    isMechanical: true,
    canCloak: true,
    cloakEnergyCost: 1,
  },

  battlecruiser: {
    id: 'battlecruiser',
    name: 'Battlecruiser',
    faction: 'dominion',
    mineralCost: 400,
    vespeneCost: 300,
    buildTime: 64,
    supplyCost: 6,
    speed: 2.62,
    sightRange: 12,
    attackRange: 6,
    attackDamage: 8,
    attackSpeed: 0.16,
    damageType: 'normal',
    maxHealth: 550,
    armor: 3,
    abilities: ['yamato_cannon', 'tactical_jump'],
    isFlying: true,
    isMechanical: true,
  },

  // Detector unit - Raven
  raven: {
    id: 'raven',
    name: 'Raven',
    faction: 'dominion',
    mineralCost: 100,
    vespeneCost: 200,
    buildTime: 43,
    supplyCost: 2,
    speed: 3.85,
    sightRange: 11,
    attackRange: 0,
    attackDamage: 0,
    attackSpeed: 0,
    damageType: 'normal',
    maxHealth: 140,
    armor: 1,
    abilities: ['auto_turret', 'interference_matrix', 'anti_armor_missile'],
    isFlying: true,
    isMechanical: true,
    isDetector: true,
    detectionRange: 11,
  },
};

export const DOMINION_UNITS = Object.values(UNIT_DEFINITIONS);
