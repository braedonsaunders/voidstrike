import { UnitDefinition, TransformMode } from '@/engine/components/Unit';

// Transform modes for Devastator
const DEVASTATOR_MODES: TransformMode[] = [
  {
    id: 'tank',
    name: 'Tank Mode',
    speed: 3.15,
    attackRange: 7,
    attackDamage: 15,
    attackSpeed: 0.74,
    splashRadius: 0.5,
    sightRange: 11,
    canMove: true,
    transformTime: 2,
    canAttackGround: true,
    canAttackAir: false, // Artillery - cannot target air
  },
  {
    id: 'siege',
    name: 'Siege Mode',
    speed: 0,
    attackRange: 13,
    attackDamage: 40,
    attackSpeed: 0.47,
    splashRadius: 1.25,
    sightRange: 11,
    canMove: false,
    transformTime: 2,
    canAttackGround: true,
    canAttackAir: false, // Artillery - cannot target air
  },
];

// Transform modes for Scorcher/Inferno
const SCORCHER_MODES: TransformMode[] = [
  {
    id: 'scorcher',
    name: 'Scorcher',
    speed: 5.95,
    attackRange: 5,
    attackDamage: 8,
    attackSpeed: 1.8,
    splashRadius: 2,
    sightRange: 10,
    canMove: true,
    transformTime: 2,
    canAttackGround: true,
    canAttackAir: false, // Flamethrower - cannot target air
  },
  {
    id: 'inferno',
    name: 'Inferno',
    speed: 3.15,
    attackRange: 2,
    attackDamage: 18,
    attackSpeed: 1.4,
    splashRadius: 1.5,
    sightRange: 10,
    canMove: true,
    transformTime: 2,
    canAttackGround: true,
    canAttackAir: false, // Flamethrower - cannot target air
  },
];

// Transform modes for Valkyrie
const VALKYRIE_MODES: TransformMode[] = [
  {
    id: 'fighter',
    name: 'Fighter Mode',
    speed: 3.85,
    attackRange: 9,
    attackDamage: 10,
    attackSpeed: 0.71,
    sightRange: 10,
    isFlying: true,
    canMove: true,
    transformTime: 2.25,
    canAttackGround: false, // Air superiority fighter - air only
    canAttackAir: true,
  },
  {
    id: 'assault',
    name: 'Assault Mode',
    speed: 3.15,
    attackRange: 6,
    attackDamage: 12,
    attackSpeed: 0.71,
    sightRange: 10,
    isFlying: false,
    canMove: true,
    transformTime: 2.25,
    canAttackGround: true, // Ground assault mode - can attack both
    canAttackAir: true,
  },
];

export const UNIT_DEFINITIONS: Record<string, UnitDefinition> = {
  fabricator: {
    id: 'fabricator',
    name: 'Fabricator',
    description: 'Worker unit that gathers resources and constructs buildings.',
    faction: 'dominion',
    mineralCost: 50,
    vespeneCost: 0,
    buildTime: 12,
    supplyCost: 1,
    speed: 4,
    sightRange: 8,
    attackRange: 1,
    attackDamage: 5,
    attackSpeed: 0.7,
    damageType: 'normal',
    maxHealth: 45,
    armor: 0,
    isWorker: true,
    isMechanical: true,
    canRepair: true,
    canAttackGround: true,
    canAttackAir: false, // Melee worker - ground only
  },

  trooper: {
    id: 'trooper',
    name: 'Trooper',
    description: 'Basic infantry unit. Cheap and effective in large numbers. Attacks ground and air.',
    faction: 'dominion',
    mineralCost: 50,
    vespeneCost: 0,
    buildTime: 18,
    supplyCost: 1,
    speed: 4.5,
    sightRange: 9,
    attackRange: 5,
    attackDamage: 6,
    attackSpeed: 0.86,
    damageType: 'normal',
    maxHealth: 45,
    armor: 0,
    abilities: ['stim_pack'],
    isBiological: true,
    canAttackGround: true,
    canAttackAir: true, // Rifle infantry - can shoot air
  },

  breacher: {
    id: 'breacher',
    name: 'Breacher',
    description: 'Heavy armored infantry. Effective against armored units. Attacks ground and air.',
    faction: 'dominion',
    mineralCost: 100,
    vespeneCost: 25,
    buildTime: 21,
    supplyCost: 2,
    speed: 3.5,
    sightRange: 10,
    attackRange: 6,
    attackDamage: 10,
    attackSpeed: 0.7,
    damageType: 'concussive',
    maxHealth: 125,
    armor: 1,
    abilities: ['stim_pack', 'concussive_shells'],
    isBiological: true,
    canAttackGround: true,
    canAttackAir: true, // Heavy rifle - can shoot air
  },

  vanguard: {
    id: 'vanguard',
    name: 'Vanguard',
    description: 'Fast assault infantry with jetpacks and grenades. Attacks ground and air.',
    faction: 'dominion',
    mineralCost: 50,
    vespeneCost: 50,
    buildTime: 32,
    supplyCost: 1,
    speed: 5.25,
    sightRange: 9,
    attackRange: 5,
    attackDamage: 4,
    attackSpeed: 1.1,
    damageType: 'normal',
    maxHealth: 60,
    armor: 0,
    abilities: ['jet_pack', 'grenade'],
    isBiological: true,
    canAttackGround: true,
    canAttackAir: true, // Jetpack infantry - can engage air
  },

  operative: {
    id: 'operative',
    name: 'Operative',
    description: 'Elite stealth unit. Can cloak, snipe, and call nuclear strikes. Attacks ground and air.',
    faction: 'dominion',
    mineralCost: 150,
    vespeneCost: 125,
    buildTime: 29,
    supplyCost: 2,
    speed: 3.94,
    sightRange: 11,
    attackRange: 6,
    attackDamage: 10,
    attackSpeed: 0.86,
    damageType: 'normal',
    maxHealth: 100,
    armor: 0,
    abilities: ['snipe', 'emp_round', 'cloak', 'nuke'],
    isBiological: true,
    canCloak: true,
    cloakEnergyCost: 1,
    canAttackGround: true,
    canAttackAir: true, // Sniper rifle - can target air
  },

  scorcher: {
    id: 'scorcher',
    name: 'Scorcher',
    description: 'Fast attack vehicle with flame weapons. Transforms into Inferno. Ground only.',
    faction: 'dominion',
    mineralCost: 100,
    vespeneCost: 0,
    buildTime: 21,
    supplyCost: 2,
    speed: 5.95,
    sightRange: 10,
    attackRange: 5,
    attackDamage: 8,
    attackSpeed: 1.8,
    damageType: 'explosive',
    maxHealth: 90,
    armor: 0,
    abilities: ['transform_inferno'],
    splashRadius: 2,
    isMechanical: true,
    canTransform: true,
    transformModes: SCORCHER_MODES,
    defaultMode: 'scorcher',
    canAttackGround: true,
    canAttackAir: false, // Flamethrower - cannot target air
  },

  devastator: {
    id: 'devastator',
    name: 'Devastator',
    description: 'Heavy siege tank. Transforms into siege mode for long-range artillery. Ground only.',
    faction: 'dominion',
    mineralCost: 150,
    vespeneCost: 125,
    buildTime: 32,
    supplyCost: 3,
    speed: 3.15,
    sightRange: 11,
    attackRange: 7,
    attackDamage: 15,
    attackSpeed: 0.74,
    damageType: 'explosive',
    maxHealth: 175,
    armor: 1,
    abilities: ['bombardment_mode'],
    splashRadius: 0.5,
    isMechanical: true,
    canTransform: true,
    transformModes: DEVASTATOR_MODES,
    defaultMode: 'tank',
    canAttackGround: true,
    canAttackAir: false, // Artillery - cannot target air
  },

  colossus: {
    id: 'colossus',
    name: 'Colossus',
    description: 'Massive walker mech. Devastating heavy firepower. Attacks ground and air.',
    faction: 'dominion',
    mineralCost: 300,
    vespeneCost: 200,
    buildTime: 43,
    supplyCost: 6,
    speed: 2.62,
    sightRange: 11,
    attackRange: 7,
    attackDamage: 30,
    attackSpeed: 0.9,
    damageType: 'explosive',
    maxHealth: 400,
    armor: 2,
    abilities: ['high_impact_payload'],
    isMechanical: true,
    canAttackGround: true,
    canAttackAir: true, // Heavy weapons platform - can target both
  },

  lifter: {
    id: 'lifter',
    name: 'Lifter',
    description: 'Flying transport and medical support. Heals nearby units. No attack.',
    faction: 'dominion',
    mineralCost: 100,
    vespeneCost: 100,
    buildTime: 30,
    supplyCost: 2,
    speed: 4.13,
    sightRange: 11,
    attackRange: 0,
    attackDamage: 0,
    attackSpeed: 0,
    damageType: 'normal',
    maxHealth: 150,
    armor: 1,
    abilities: ['heal', 'load', 'unload', 'afterburners'],
    isFlying: true,
    isMechanical: true,
    isTransport: true,
    transportCapacity: 8,
    canHeal: true,
    healRange: 4,
    healRate: 12.6,
    healEnergyCost: 1,
    canAttackGround: false, // Support unit - no attack
    canAttackAir: false,
  },

  valkyrie: {
    id: 'valkyrie',
    name: 'Valkyrie',
    description: 'Transforming fighter. Fighter mode: air only. Assault mode: ground and air.',
    faction: 'dominion',
    mineralCost: 150,
    vespeneCost: 75,
    buildTime: 30,
    supplyCost: 2,
    speed: 3.85,
    sightRange: 10,
    attackRange: 9,
    attackDamage: 10,
    attackSpeed: 0.71,
    damageType: 'explosive',
    maxHealth: 135,
    armor: 0,
    abilities: ['transform_assault'],
    isFlying: true,
    isMechanical: true,
    canTransform: true,
    transformModes: VALKYRIE_MODES,
    defaultMode: 'fighter',
    canAttackGround: false, // Fighter mode starts air-only
    canAttackAir: true,
  },

  specter: {
    id: 'specter',
    name: 'Specter',
    description: 'Cloakable strike fighter. Stealthy air superiority. Attacks ground and air.',
    faction: 'dominion',
    mineralCost: 150,
    vespeneCost: 100,
    buildTime: 43,
    supplyCost: 3,
    speed: 3.85,
    sightRange: 10,
    attackRange: 6,
    attackDamage: 12,
    attackSpeed: 0.89,
    damageType: 'normal',
    maxHealth: 140,
    armor: 0,
    abilities: ['cloak'],
    isFlying: true,
    isMechanical: true,
    canCloak: true,
    cloakEnergyCost: 1,
    canAttackGround: true,
    canAttackAir: true, // Strike fighter - can target both
  },

  dreadnought: {
    id: 'dreadnought',
    name: 'Dreadnought',
    description: 'Massive capital ship with continuous laser cannon and devastating Power Cannon. Attacks ground and air.',
    faction: 'dominion',
    mineralCost: 400,
    vespeneCost: 300,
    buildTime: 64,
    supplyCost: 6,
    speed: 2.62,
    sightRange: 12,
    attackRange: 8,
    attackDamage: 12,
    attackSpeed: 2.0, // Continuous laser fire - very fast attack speed
    damageType: 'psionic', // Uses laser visual effect
    maxHealth: 550,
    armor: 3,
    abilities: ['power_cannon', 'warp_jump'],
    isFlying: true,
    isMechanical: true,
    canAttackGround: true,
    canAttackAir: true, // Capital ship - can target both
  },

  // Detector unit - Overseer
  overseer: {
    id: 'overseer',
    name: 'Overseer',
    description: 'Support craft with detection. Reveals cloaked and burrowed units. No attack.',
    faction: 'dominion',
    mineralCost: 100,
    vespeneCost: 200,
    buildTime: 43,
    supplyCost: 2,
    speed: 3.85,
    sightRange: 11,
    attackRange: 0,
    attackDamage: 0,
    attackSpeed: 0,
    damageType: 'normal',
    maxHealth: 140,
    armor: 1,
    abilities: ['auto_turret', 'interference_matrix', 'anti_armor_missile'],
    isFlying: true,
    isMechanical: true,
    isDetector: true,
    detectionRange: 11,
    canAttackGround: false, // Detector - no attack
    canAttackAir: false,
  },
};

export const DOMINION_UNITS = Object.values(UNIT_DEFINITIONS);
